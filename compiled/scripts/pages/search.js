define(["modules/jquery-mozu","shim!vendor/underscore>_","hyprlive","modules/backbone-mozu","modules/models-faceting","modules/views-productlists","modules/views-paging"],function(e,t,a,n,o,d,i){var r=a.getThemeSetting("useAnimatedProductLists")&&!Modernizr.mq("(max-width: 480px)");e(document).ready(function(){var a,s=e("[data-mz-search]"),c=e("[data-mz-facets]"),m=s.data("mz-category"),l=s.data("mz-search"),u=require.mozuData("facetedproducts");if(u){var g=new o.FacetedProductCollection(u);l&&g.setQuery(l),m&&g.setHierarchy("categoryId",m),a={pagingControls:new i.PagingControls({el:s.find("[data-mz-pagingcontrols]"),model:g}),pageNumbers:new i.PageNumbers({el:s.find("[data-mz-pagenumbers]"),model:g}),productList:r?new d.AnimatedList({el:s.find("[data-mz-productlist] .mz-productlist-list"),model:g}):new d.List({el:s.find("[data-mz-productlist]"),model:g})},c.length>0&&(a.facetPanel=new d.FacetingPanel({el:c,model:g})),n.history.start({pushState:!0,root:window.location.pathname});var p=new n.Router;g.on("facetchange",function(e){p.navigate(e,{replace:!0})}),g.on("change:pageSize",g.updateFacets,g)}t.invoke(a,"render"),window.facetingViews=a})});